(this.webpackJsonptodolist=this.webpackJsonptodolist||[]).push([[0],{27:function(e,t,c){},47:function(e,t,c){},48:function(e,t,c){"use strict";c.r(t);var n=c(0),r=c(2),s=c.n(r),o=c(18),a=c.n(o),i=(c(27),c(9)),d=c.n(i),u=c(3),l=c(19),j=c(21),b=c(5),p=c(20),m=c.n(p),h=c(6),O=function(e){return"number"===typeof e&&!isNaN(e)};function x(e){var t={id:0,name:"",currencyType:1,cost:"",complete:!1},c=Object(r.useState)(t),s=Object(b.a)(c,2),o=s[0],a=s[1],i=function(e){var t=e.target,c=t.name,n=t.value;"cost"!==c&&"currencyType"!==c||(n=Number(n)),a(Object(u.a)(Object(u.a)({},o),{},Object(h.a)({},c,n)))};return Object(n.jsxs)("form",{onSubmit:function(c){c.preventDefault(),function(e){return"string"===typeof e&&""!==e}(o.name.replace(/(^\s*)|(\s*$)/g,""))&&O(o.cost)&&O(o.currencyType)&&(e.addTask(o),a(t))},children:[Object(n.jsx)("input",{className:"input",type:"text",placeholder:"\u4efb\u52a1",value:o.name,name:"name",required:!0,onChange:i}),Object(n.jsx)("input",{className:"input",type:"number",min:"0",value:o.cost,placeholder:"\u4ef7\u683c",name:"cost",required:!0,onChange:i}),Object(n.jsx)("select",{name:"currencyType",onChange:i,value:o.currencyType,children:[{id:1,name:"RUB"},{id:2,name:"CNY"},{id:3,name:"USD"}].map((function(e){return Object(n.jsx)("option",{value:e.id,children:e.name},e.id)}))}),Object(n.jsx)("button",{className:"addBtn",children:"\u6dfb\u52a0"})]})}function f(e){var t=e.complete?e.todolist.every((function(e){return!e.complete})):e.todolist.every((function(e){return e.complete})),c=function(t){return function(c){t.complete=c.target.checked,e.editTask(t)}};return Object(n.jsxs)("div",{children:[Object(n.jsx)("p",{children:e.complete?"\u5df2\u5b8c\u6210\uff1a":"\u8ba1\u5212\uff1a"}),Object(n.jsx)("table",{width:"100%",children:Object(n.jsxs)("tbody",{children:[0===e.todolist.length||t?Object(n.jsx)("tr",{children:Object(n.jsx)("td",{className:"noData",colSpan:5,align:"center",children:"\u6682\u65e0\u6570\u636e"})}):e.todolist.map((function(t,r){if(e.complete===t.complete)return Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{width:"30px",children:Object(n.jsx)("input",{type:"checkbox",checked:t.complete,onChange:c(t)})}),Object(n.jsx)("td",{width:"30%",className:t.complete?"complete":"",children:t.name}),Object(n.jsxs)("td",{children:["\uffe5",t.cny]}),Object(n.jsxs)("td",{children:["\u20bd",t.rub]}),Object(n.jsxs)("td",{children:["$",t.usd]})]},r)})),Object(n.jsxs)("tr",{className:"lastLine",children:[Object(n.jsx)("td",{colSpan:2,children:e.complete?"\u4e00\u5171\u82b1\u4e86\uff1a":"\u5c06\u8981\u82b1\u8d39\uff1a"}),Object(n.jsxs)("td",{children:["\uffe5",e.total.cny]}),Object(n.jsxs)("td",{children:["\u20bd",e.total.rub]}),Object(n.jsxs)("td",{children:["$",e.total.usd]})]})]})})]})}function y(e){var t=Object(r.useMemo)((function(){var t={complete:{cny:0,rub:0,usd:0},todo:{cny:0,rub:0,usd:0}},c=e.todolist;return c.length>0&&c.every((function(e){return O(e.cny)&&O(e.rub)&&O(e.usd)}))&&c.forEach((function(e){e.complete?(t.complete.cny+=e.cny,t.complete.rub+=e.rub,t.complete.usd+=e.usd):(t.todo.cny+=e.cny,t.todo.rub+=e.rub,t.todo.usd+=e.usd)})),t}),[e.todolist]);return Object(n.jsxs)(r.Fragment,{children:[Object(n.jsx)(f,{complete:!1,todolist:e.todolist,total:t.todo,editTask:e.editTask}),Object(n.jsx)(f,{complete:!0,todolist:e.todolist,total:t.complete,editTask:e.editTask})]})}c(47);var U=function(){var e={1:"RUB",2:"CNY",3:"USD"},t=Object(r.useState)([]),c=Object(b.a)(t,2),s=c[0],o=c[1],a=Object(r.useState)({CNY:{},RUB:{},USD:{}}),i=Object(b.a)(a,2),p=i[0],h=i[1],O=function(e,t,c){return e===t?c:c*p[e][t]};return Object(r.useEffect)((function(){(function(){var e=Object(l.a)(d.a.mark((function e(){var t,c,n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m()("https://api.globus.furniture/forex");case 3:for(r in t=e.sent,c=t.data,n={CNY:{},RUB:{},USD:{}},c)n.CNY[r]=c[r].value;n.USD.CNY=1/n.CNY.USD,n.USD.RUB=n.USD.CNY*n.CNY.RUB,n.RUB.CNY=1/n.CNY.RUB,n.RUB.USD=1/n.USD.RUB,h(Object(u.a)({},n)),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),window.alert("Error occur!");case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(n.jsxs)("div",{className:"container",children:[Object(n.jsxs)("div",{className:"row",children:[Object(n.jsx)(x,{addTask:function(t){t.cny=O(e[t.currencyType],"CNY",t.cost),t.rub=O(e[t.currencyType],"RUB",t.cost),t.usd=O(e[t.currencyType],"USD",t.cost),t.id=s.length+1,o([].concat(Object(j.a)(s),[t]))}}),Object(n.jsxs)("div",{className:"right",children:[Object(n.jsxs)("span",{children:[p.CNY.RUB?p.CNY.RUB.toFixed(3):"...","\u20bd/\xa5 "]}),Object(n.jsxs)("span",{children:[p.USD.RUB?p.USD.RUB.toFixed(3):"...","\u20bd/$ "]}),Object(n.jsxs)("span",{children:[p.USD.CNY?p.USD.CNY.toFixed(3):"...","\xa5/$"]})]})]}),Object(n.jsx)("div",{className:"row",children:Object(n.jsx)(y,{todolist:s,editTask:function(e){o(s.map((function(t){return t.id===e.id?e:t})))}})})]})};a.a.render(Object(n.jsx)(s.a.StrictMode,{children:Object(n.jsx)(U,{})}),document.getElementById("root"))}},[[48,1,2]]]);
//# sourceMappingURL=main.720edfe7.chunk.js.map