{"version":3,"sources":["components/AddTodo.js","components/TaskList.js","components/TodoList.js","App.js","index.js"],"names":["AddItem","props","initialTodo","name","currencyType","cost","complete","useState","todo","setTodo","handleInputChange","event","target","value","onSubmit","preventDefault","Number","addTask","className","type","placeholder","required","onChange","id","map","currency","TaskList","noCorrectData","todolist","every","checked","editTask","width","length","colSpan","align","index","cny","rub","usd","total","TodoList","isNumber","num","undefined","isNaN","totalData","useMemo","forEach","item","App","currencyName","1","2","3","setTodolist","CNY","RUB","USD","rateDict","setRateDict","convertCost","from","to","updatedTask","useEffect","a","axios","i","result","cnyExchangeRate","data","rate","window","alert","fetchData","some","origin","toFixed","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.02da8275.chunk.js","sourcesContent":["import { useState } from 'react'\r\n\r\nexport default function AddItem(props) {\r\n  const currencyType = [\r\n    { id: 1, name: 'RUB' },\r\n    { id: 2, name: 'CNY' },\r\n    { id: 3, name: 'USD' },\r\n  ]\r\n\r\n  const initialTodo = {\r\n    name: '',\r\n    currencyType: 1,\r\n    cost: '',\r\n    complete: false,\r\n  }\r\n  const [todo, setTodo] = useState(initialTodo)\r\n\r\n  const handleInputChange = (event) => {\r\n    const { name, value } = event.target\r\n    setTodo({ ...todo, [name]: value })\r\n  }\r\n\r\n  const handleSubmit = (event) => {\r\n    event.preventDefault()\r\n    if (!todo.name || !todo.cost) {\r\n      return\r\n    }\r\n    todo.cost = Number(todo.cost)\r\n    props.addTask(todo)\r\n    setTodo(initialTodo)\r\n  }\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit}>\r\n      <input\r\n        className=\"input\"\r\n        type=\"text\"\r\n        placeholder=\"任务\"\r\n        value={todo.name}\r\n        name=\"name\"\r\n        required\r\n        onChange={handleInputChange}\r\n      ></input>\r\n      <input\r\n        className=\"input\"\r\n        type=\"number\"\r\n        value={todo.cost}\r\n        placeholder=\"价格\"\r\n        name=\"cost\"\r\n        required\r\n        onChange={handleInputChange}\r\n      ></input>\r\n      <select name=\"currencyType\" onChange={handleInputChange} value={todo.currencyType}>\r\n        {currencyType.map((currency) => (\r\n          <option key={currency.id} value={currency.id}>\r\n            {currency.name}\r\n          </option>\r\n        ))}\r\n      </select>\r\n      <button className=\"addBtn\">添加</button>\r\n    </form>\r\n  )\r\n}\r\n","export default function TaskList(props) {\r\n  let noCorrectData = props.complete\r\n    ? props.todolist.every((todo) => !todo.complete)\r\n    : props.todolist.every((todo) => todo.complete)\r\n\r\n  const handleInputChange = (todo) => {\r\n    return (event) => {\r\n      todo.complete = event.target.checked\r\n      props.editTask(todo.name, todo)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <p>{props.complete ? '已完成：' : '计划：'}</p>\r\n      <table width=\"100%\">\r\n        <tbody>\r\n          {props.todolist.length === 0 || noCorrectData ? (\r\n            <tr>\r\n              <td className=\"noData\" colSpan={5} align=\"center\">\r\n                暂无数据\r\n              </td>\r\n            </tr>\r\n          ) : (\r\n            props.todolist.map((todo, index) => {\r\n              if (props.complete === todo.complete) {\r\n                return (\r\n                  <tr key={index}>\r\n                    <td width=\"30px\">\r\n                      <input\r\n                        type=\"checkbox\"\r\n                        checked={todo.complete}\r\n                        onChange={handleInputChange(todo)}\r\n                      />\r\n                    </td>\r\n                    <td width=\"30%\" className={todo.complete ? 'complete' : ''}>\r\n                      {todo.name}\r\n                    </td>\r\n                    <td>￥{todo.cny}</td>\r\n                    <td>₽{todo.rub}</td>\r\n                    <td>${todo.usd}</td>\r\n                  </tr>\r\n                )\r\n              }\r\n            })\r\n          )}\r\n          <tr className=\"lastLine\">\r\n            <td colSpan={2}>{props.complete ? '一共花了：' : '将要花费：'}</td>\r\n            <td>￥{props.total.cny}</td>\r\n            <td>₽{props.total.rub}</td>\r\n            <td>${props.total.usd}</td>\r\n          </tr>\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  )\r\n}\r\n","import React, { useMemo, Fragment } from 'react'\r\nimport TaskList from './TaskList'\r\n\r\nexport default function TodoList(props) {\r\n  const isNumber = (num) => {\r\n    return num !== undefined && num !== '' && !isNaN(num)\r\n  }\r\n\r\n  const totalData = useMemo(() => {\r\n    const total = {\r\n      complete: { cny: 0, rub: 0, usd: 0 },\r\n      todo: { cny: 0, rub: 0, usd: 0 },\r\n    }\r\n    let todolist = props.todolist\r\n    if (\r\n      todolist.length > 0 &&\r\n      todolist.every((todo) => isNumber(todo.cny) && isNumber(todo.rub) && isNumber(todo.usd))\r\n    ) {\r\n      todolist.forEach((item) => {\r\n        if (item.complete) {\r\n          total.complete.cny += item.cny\r\n          total.complete.rub += item.rub\r\n          total.complete.usd += item.usd\r\n        } else {\r\n          total.todo.cny += item.cny\r\n          total.todo.rub += item.rub\r\n          total.todo.usd += item.usd\r\n        }\r\n      })\r\n    }\r\n    return total\r\n  }, [props.todolist])\r\n\r\n  return (\r\n    <Fragment>\r\n      <TaskList\r\n        complete={false}\r\n        todolist={props.todolist}\r\n        total={totalData.todo}\r\n        editTask={props.editTask}\r\n      ></TaskList>\r\n      <TaskList\r\n        complete={true}\r\n        todolist={props.todolist}\r\n        total={totalData.complete}\r\n        editTask={props.editTask}\r\n      ></TaskList>\r\n    </Fragment>\r\n  )\r\n}\r\n","import { useState, useEffect } from 'react'\r\nimport axios from 'axios'\r\nimport AddTodo from './components/AddTodo'\r\nimport TodoList from './components/TodoList'\r\nimport './App.css'\r\n\r\nfunction App() {\r\n  const currencyName = {\r\n    1: 'RUB',\r\n    2: 'CNY',\r\n    3: 'USD',\r\n  }\r\n\r\n  const [todolist, setTodolist] = useState([])\r\n  const [rateDict, setRateDict] = useState({ CNY: {}, RUB: {}, USD: {} })\r\n\r\n  const convertCost = (from, to, cost) => (from === to ? cost : cost * rateDict[from][to])\r\n\r\n  const editTask = (name, updatedTask) => {\r\n    setTodolist(todolist.map((todo) => (todo.name === name ? updatedTask : todo)))\r\n  }\r\n\r\n  const addTask = (todo) => {\r\n    todo.cny = convertCost(currencyName[todo.currencyType], 'CNY', todo.cost)\r\n    todo.rub = convertCost(currencyName[todo.currencyType], 'RUB', todo.cost)\r\n    todo.usd = convertCost(currencyName[todo.currencyType], 'USD', todo.cost)\r\n    let ifExist = todolist.some((origin) => origin.name === todo.name)\r\n    if (ifExist) {\r\n      editTask(todo.name, todo)\r\n    } else {\r\n      setTodolist([...todolist, todo])\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        const result = await axios('https://api.globus.furniture/forex')\r\n        let cnyExchangeRate = result.data\r\n        let rate = {\r\n          CNY: {},\r\n          RUB: {},\r\n          USD: {},\r\n        }\r\n        for (let i in cnyExchangeRate) {\r\n          rate.CNY[i] = cnyExchangeRate[i].value\r\n        }\r\n        rate.USD.CNY = 1 / rate.CNY.USD\r\n        rate.USD.RUB = rate.USD.CNY * rate.CNY.RUB\r\n        rate.RUB.CNY = 1 / rate.CNY.RUB\r\n        rate.RUB.USD = 1 / rate.USD.RUB\r\n        setRateDict({ ...rate })\r\n      } catch (err) {\r\n        window.alert('Error occur!')\r\n      }\r\n    }\r\n\r\n    fetchData()\r\n  }, [])\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <div className=\"row\">\r\n        <AddTodo addTask={addTask}></AddTodo>\r\n        <div className=\"right\">\r\n          <span>{rateDict.CNY.RUB ? rateDict.CNY.RUB.toFixed(3) : '...'}₽/¥ </span>\r\n          <span>{rateDict.USD.RUB ? rateDict.USD.RUB.toFixed(3) : '...'}₽/$ </span>\r\n          <span>{rateDict.USD.CNY ? rateDict.USD.CNY.toFixed(3) : '...'}¥/$</span>\r\n        </div>\r\n      </div>\r\n      <div className=\"row\">\r\n        <TodoList todolist={todolist} editTask={editTask}></TodoList>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default App\r\n","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport './index.css'\r\nimport App from './App'\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n)\r\n"],"sourceRoot":""}